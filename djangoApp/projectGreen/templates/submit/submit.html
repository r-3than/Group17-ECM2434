<!doctype html>
<!--
    Main Authors:
        OJ - Design + Styling
        ER - Integration
-->
{% load static %}
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <link href="{% static 'css/submit.css' %}" rel="stylesheet" media="screen and (min-width: 961px)">
        <link href="{% static 'css/submit-mobile.css' %}" rel="stylesheet" media="screen and (max-width: 960px)">
        <link href="{% static 'css/variables.css' %}" rel="stylesheet">
    </head>
    <body>
        <header class="row">
            <div class="side"></div>
            <div class="title centre">
                <a class="title" href="">BeGreen</a>
            </div>
            <div class="side">
                <div class="account">
                    <div style="height: 80%; padding-left: 50%;">
                        <div class="icon rounded-circle" id="account">{{user.username|make_list|first| capfirst}}</div>
                    </div>
                    <div class="points">Score: {{user_points}}</div>
                </div>
                <script>
                  account = document.getElementById("account");
                  account.onclick = function() {
                      location.href = "{% url 'account' %}"
                  }
              </script>
            </div>
        </header>
        <main class="w-100 m-auto text-center">
          <form class="m-auto mt-2" method="post" enctype="multipart/form-data" action="/uploadphoto/">
            <div>
              <img id="submission" class="rounded-3" src="" style="visibility: hidden;">
              <label class="rounded-5" for="upload_pic">
                <p id="label_text">Click to select photo</p>
                <input style="display: none;"
                type="file"
                id="upload_pic"
                name="upload_pic"
                accept="image/*"
                capture="user" />
              </label>
              <br>
              <a class="subtitle">Today's Challenge: {{active_challenge}}</a>
            </div>
            <button class="w-100 btn btn-lg btn-primary mb-3 mt-3" style="background-color:#003c3c" type="submit">Post</button>
          </form>
          <form class="form-signin m-auto mt-2" action="{% url 'home' %}">
            <button class="w-100 btn btn-lg btn-primary mb-3" style="background-color:#003c3c" type="submit">Go to feed</button>
            <p class="friends">{{post_count}} friends have already posted</p>
          </form>
          <script>
            input = document.getElementById("upload_pic");
            labelText = document.getElementById("label_text");
            submission = document.getElementById("submission");
            input.onchange = evt => {
              const [file] = input.files
              if (file) {
                labelText.textContent = "Click to change photo";
                submission.setAttribute("style", "visibility: visible;")
                submission.src = URL.createObjectURL(file)
              }
            }
          </script>
        </main>
      </body>
</html>